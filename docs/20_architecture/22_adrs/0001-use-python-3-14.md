# ADR-0001: Python 3.14 の採用

**ステータス**: Accepted

**日付**: 2026-01-14

**決定者**: kotonoha-bot 開発チーム

## コンテキスト

場面緘黙自助グループ運営支援のための Discord Bot を開発するにあたり、プログラミング言語を選定する必要がある。以下の要件を満たす必要がある:

1. **Discord Bot 開発に適している**: discord.py などの成熟したライブラリが利用可能
2. **非同期処理に対応**: Discord API は非同期処理が必須
3. **保守性**: 適切なドキュメントとコミュニティサポート
4. **パフォーマンス**: リアルタイム応答に必要な性能
5. **最新機能**: モダンな言語機能を活用できる

## 決定

**Python 3.14** を採用する。

## 理由

### 1. discord.py との互換性

- discord.py は Python 3.8+ をサポート
- Python 3.14 は完全に互換性がある
- 非同期処理（async/await）をサポート

### 2. 最新の Python 機能を利用できる

- 最新の型ヒント機能
- パフォーマンスの改善
- セキュリティアップデート
- モダンな構文

### 3. パフォーマンスの改善

- 各バージョンでパフォーマンスが向上
- 非同期処理の最適化
- メモリ使用量の改善

### 4. 豊富なエコシステム

- 標準ライブラリが充実
- サードパーティライブラリが豊富
- コミュニティサポートが充実

### 5. 開発体験

- 読みやすい構文
- デバッグが容易
- IDE サポートが充実

## 代替案

### 代替案 A: Python 3.13

**メリット**:

- より安定したバージョン（リリースから時間が経過）
- 互換性が高い
- 実績がある

**デメリット**:

- 最新機能を利用できない
- パフォーマンス改善が少ない

**採用しなかった理由**:

- **最新機能を優先**
- Python 3.14 の互換性に問題がない
- パフォーマンス改善を重視

---

### 代替案 B: Node.js (JavaScript/TypeScript)

**メリット**:

- discord.js が成熟している
- 非同期処理が得意
- 高速な実行環境

**デメリット**:

- Python エコシステムを活用できない
- 型安全性が TypeScript に依存
- プロジェクトの一貫性が損なわれる

**採用しなかった理由**:

- **Python エコシステムを優先**
- 既存の Python スキルを活用
- プロジェクトの一貫性を保つ

---

### 代替案 C: Go

**メリット**:

- 非常に高速
- コンパイル型言語
- 並行処理が得意

**デメリット**:

- Discord Bot ライブラリが限定的
- 開発速度が遅い
- 学習コストが高い

**採用しなかった理由**:

- **開発速度を優先**
- Discord Bot 開発の実績が少ない
- 過剰な最適化（premature optimization）

---

## 結果

### メリット

1. **最新機能**: Python 3.14 の最新機能を活用できる
2. **互換性**: discord.py と完全に互換
3. **パフォーマンス**: 各バージョンで改善されたパフォーマンス
4. **開発体験**: 読みやすく、デバッグが容易
5. **エコシステム**: 豊富なライブラリとコミュニティサポート

### デメリット

1. **新しさ**: リリース直後で実績が少ない可能性
2. **互換性リスク**: 一部のライブラリが未対応の可能性（ただし discord.py は対応済み）

### トレードオフ

- **新しさ vs 安定性**: 最新機能を優先し、互換性リスクを許容
- **パフォーマンス vs 開発速度**: 開発速度を優先しつつ、パフォーマンスも確保

### 実装への影響

1. **環境構築**: Python 3.14 のインストールが必要
2. **依存関係**: discord.py などのライブラリが Python 3.14 をサポートしていることを確認
3. **CI/CD**: Python 3.14 の Docker イメージを使用
4. **型ヒント**: 最新の型ヒント機能を活用

## 参考資料

- [Python 3.14 Release Notes](https://docs.python.org/3.14/whatsnew/3.14.html)
- [discord.py Documentation](https://discordpy.readthedocs.io/)
- [middleware-selection.md](../../20_architecture/22_adrs/middleware-selection.md)

---

**作成日**: 2026年1月14日
**最終更新日**: 2026年1月14日
